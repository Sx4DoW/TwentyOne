<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Twenty-one</title>
<style>
    body {
        background-color: #1a1a1a;
        color: #cfcfcf;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        margin: 20px;
        user-select: none;
    }
    .tit {
        text-align: center;
        font-size: 2em;
        color: #820909;
        margin-bottom: 15px;
    }
    .container {
        max-width: 800px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
    }
    .bet-box {
        background: #2a2a2a;
        border: 1px solid #550000;
        border-radius: 6px;
        padding: 15px 20px;
        width: 200px;
        color: #eee;
        text-align: center;
        box-shadow: 0 0 10px #5a0000;
    }
    .bet-box h3 {
        margin-top: 0;
        margin-bottom: 10px;
        font-weight: 600;
        font-size: 1.3em;
        color: #aa2222;
    }
    .bet-controls {
        display: flex;
        justify-content: center;
        gap: 10px;
        align-items: center;
    }
    .bet-controls button {
        background-color: #550000;
        border: none;
        color: #eee;
        font-size: 1.2em;
        width: 32px;
        height: 32px;
        cursor: pointer;
        border-radius: 4px;
        transition: background-color 0.2s ease;
    }
    .bet-controls button:hover {
        background-color: #aa2222;
    }
    .bet-controls input[type="number"] {
        width: 60px;
        font-size: 1.2em;
        text-align: center;
        background: #3a3a3a;
        border: 1px solid #550000;
        border-radius: 4px;
        color: #eee;
        -moz-appearance: textfield;
    }
    .bet-controls input[type=number]::-webkit-inner-spin-button, 
    .bet-controls input[type=number]::-webkit-outer-spin-button { 
        -webkit-appearance: none; 
        margin: 0; 
    }

    /* Tabella conversioni */
    table.tab {
        margin: 0 auto 40px auto;
        text-align: center;
        max-width: 400px;
        border-collapse: collapse;
    }
    table.tab th, table.tab td {
        padding: 10px 15px;
        font-size: 1.5em;
        border-bottom: 1px solid #550000;
    }
    table.tab thead th {
        color: #aa2222;
    }

    /* Linea numerata */
    .line-container {
        position: relative;
        width: 100%;
        max-width: 800px;
        margin: 60px auto 0 auto;
        height: 60px;
    }
    .line {
        position: absolute;
        top: 30px;
        left: 0;;
        right: 0;
        height: 3px;
        background-color: #550000;
        border-radius: 2px;
    }
    .ticks {
        position: absolute;
        top: 5px;
        left: 0;
        right: 0;
        display: flex;
        justify-content: space-between;
        font-size: 0.9em;
        color: #aa2222;
        font-weight: 600;
        user-select: none;
    }

    /* Sega elettrica */
    #saw {
        position: absolute;
        top: 0;
        width: 40px;
        height: 40px;
        transition: left 1s ease;
        user-select: none;
        pointer-events: none;
    }

    /* Box vincitore */
    #winnerSelect {
        background: #2a2a2a;
        border: 1px solid #550000;
        box-shadow: 0 0 8px #5a0000;
        border-radius: 6px;
        width: 250px;
        margin: 25px auto 0 auto;
        padding: 15px 20px;
        color: #eee;
        display: none;
        text-align: center;
        user-select: none;
    }
    #winnerSelect label {
        margin-right: 15px;
        font-weight: 600;
        cursor: pointer;
    }
    #winnerSelect input[type="radio"] {
        margin-right: 6px;
        cursor: pointer;
    }

    /* Pulsante */
    #endButton {
        display: block;
        margin: 30px auto 0 auto;
        background-color: #550000;
        border: none;
        color: #eee;
        font-size: 1.3em;
        padding: 10px 20px;
        border-radius: 6px;
        cursor: pointer;
        box-shadow: 0 0 12px #aa2222;
        transition: background-color 0.3s ease;
        user-select: none;
    }
    #endButton:hover {
        background-color: #aa2222;
    }

</style>
</head>
<body>
    <h1 class="tit">Twenty-one</h1>

    <table class="tab">
        <thead>
            <tr><th class="tit">conversioni</th></tr>
        </thead>
        <tbody>
            <tr><td>‚ô£Ô∏è ‚û°Ô∏è ü¶Ø</td></tr>
            <tr><td>‚ô•Ô∏è ‚û°Ô∏è üèÜ</td></tr>
            <tr><td>‚ô¶Ô∏è ‚û°Ô∏è ü™ô</td></tr>
            <tr><td>‚ô†Ô∏è ‚û°Ô∏è ‚öîÔ∏è</td></tr>
        </tbody>
    </table>

    <div class="container">
        <div class="bet-box">
            <h3>bet del round:</h3>
            <div class="bet-controls">
                <button onclick="changeBet('roundBet', -1)">-</button>
                <input type="number" id="roundBet" value="0" min="0" max="16" readonly />
                <button onclick="changeBet('roundBet', 1)">+</button>
            </div>
        </div>

        <div class="bet-box">
            <h3>bet attuale:</h3>
            <div class="bet-controls">
                <button onclick="changeBet('currentBet', -1)">-</button>
                <input type="number" id="currentBet" value="0" min="0" max="16" readonly />
                <button onclick="changeBet('currentBet', 1)">+</button>
            </div>
        </div>
    </div>

    <button id="endButton" onclick="showWinnerSelect()">End it here!</button>

    <div id="winnerSelect">
        <p>Chi ha vinto?</p>
        <label><input type="radio" name="winner" value="1" /> Giocatore 1</label>
        <label><input type="radio" name="winner" value="2" /> Giocatore 2</label>
        <br /><br />
        <button onclick="moveSaw()">Conferma</button>
    </div>

    <div class="line-container">
        <img id="saw" src="https://m.media-amazon.com/images/I/81r8hWzb7YL.jpg" alt="sega elettrica" />
        <div class="line"></div>
        <div class="ticks">
            <!-- Ticks da 0 a 16 -->
            <span>0</span><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span>
            <span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span>
        </div>
    </div>

<script>
    const total = 16;
    const saw = document.getElementById("saw");

    // Posizione corrente della sega (indice tacca 0..16)
    let currentSawIndex = 8;

    // Funzione per cambiare bet (incrementa o decrementa)
    function changeBet(id, delta) {
        const input = document.getElementById(id);
        let val = parseInt(input.value) || 0;
        val += delta;
        if (val < 0) val = 0;
        if (val > total) val = total;
        input.value = val;
    }

    // Calcola spazio tra tick per linea orizzontale
    function sawPosition() {
        const lineContainer = document.querySelector(".line-container");
        const width = lineContainer.clientWidth;
        return { tickSpacing: width / total };
    }

    // Posiziona la sega all'inizio o al resize
    function initSaw() {
        const { tickSpacing } = sawPosition();
        saw.style.left = (currentSawIndex * tickSpacing - saw.width / 2) + "px";
    }

    window.addEventListener("load", initSaw);
    window.addEventListener("resize", initSaw);

    // Mostra la selezione vincitore
    function showWinnerSelect() {
        document.getElementById("winnerSelect").style.display = "block";
    }

    // Muove la sega in base al vincitore e bet attuale
    function moveSaw() {
        const winner = document.querySelector('input[name="winner"]:checked');
        if (!winner) {
            alert("Seleziona un vincitore.");
            return;
        }
        const betCurrent = parseInt(document.getElementById("currentBet").value) || 0;
        const direction = winner.value === "1" ? 1 : -1;
        const { tickSpacing } = sawPosition();

        let newPosIndex = currentSawIndex + direction * betCurrent;

        if (newPosIndex < 0) newPosIndex = 0;
        if (newPosIndex > total) newPosIndex = total;

        // Nascondi selezione vincitore subito
        document.getElementById("winnerSelect").style.display = "none";

        saw.addEventListener("transitionend", () => {
            // Aggiorna posizione corrente
            currentSawIndex = newPosIndex;

            // Aggiorna bet attuale alla bet del round (bet del round rimane invariata)
            const betRound = parseInt(document.getElementById("roundBet").value) || 0;
            document.getElementById("currentBet").value = betRound;

            // Resetta selezione radio per futuro uso
            const radios = document.querySelectorAll('input[name="winner"]');
            radios.forEach(radio => radio.checked = false);
        }, { once: true });

        saw.style.left = (newPosIndex * tickSpacing - saw.width / 2) + "px";
    }
</script>

</body>
</html>
